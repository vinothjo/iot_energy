<div id="main" role="main">
    <!-- RIBBON -->
    <div id="ribbon">
        <!-- breadcrumb -->
        <ol class="breadcrumb">
            <li>Home / {{ title }}</li>
        </ol>
    </div>
    <!-- END RIBBON -->

    <!-- MAIN CONTENT -->
    <div id="content">
        <!-- widget grid -->
        <section id="widget-grid" class="">
            <div class="row">
                <!-- NEW WIDGET START -->
                <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <form action="{{ url_for('Admin.application_user') }}" method="post">
                    <!--start Widget ID (each widget will need unique ID)-->
                        <div class="jarviswidget" id="wid-id-0" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-editbutton="false">
                            <header>
                                <h2><strong>Add New {{ title }}</strong> </h2>
                            </header>
                            <!-- widget div-->
                            <div>
                                <!-- widget content -->
                                <div class="widget-body">
                                    <div class="row">
                                        <div class="col-sm-3" style="display:none;">
                                            <div class="form-group">
                                                <label>User ID</label>
                                                <input class="form-control" placeholder="User id" name="user_id" type="text" value={{ user_id|string }}>
                                            </div>
                                        </div>

                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Client Name</label>
                                                <select class="form-control" name="client_name" data-plugin="select_hrm" data-placeholder="Client Name" value={{ client_name|string }}>
                                                    <option value="0">Select One</option>
                                                    {% for client in clients %}
                                                            <option value="{{client._id}}">{{client.client_name}}</option>
                                                    {% endfor %}
                                                    </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Customer Name</label>
                                                <select class="form-control" name="customer_name" data-plugin="select_hrm" data-placeholder="Customer Name" value={{ customer_name|string }}>
                                                    <option value="0">Select One</option>
                                                {% for customer in customers %}                                                    
                                                        <option value="{{customer._id}}">{{customer.customer_name}}</option>
                                                {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Customer Code</label>
                                                <input class="form-control" placeholder="Customer Code" name="customer_code" type="text" value={{ customer_code|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>User Name</label>
                                                <input class="form-control" placeholder="User Name" name="user_name" type="text" value={{ user_name|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Password</label>
                                                <input id="password" class="form-control" required="required" placeholder="Password" name="password" type="password" value={{ password|string }}>
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Confirm Password</label>
                                                <input id="password_confirm" class="form-control" required="required" placeholder="Confirm Password" name="password_confirm" type="password"  oninput="check(this)" value={{ password_confirm|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>User Role</label>
                                                <select class="form-control" name="user_role" data-plugin="select_hrm" data-placeholder="User Role" >
                                                    <option value="">Select One</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Effective Start Date</label>
                                                <input class="form-control" placeholder="dd/mm/yyyy" name="effective_start_date" type="date" value={{ effective_start_date|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Effective End Date</label>
                                                <input class="form-control" placeholder="dd/mm/yyyy" name="effective_end_date" type="date" value={{ effective_end_date|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Active Status</label>
                                                <select class="form-control" name="active_status" data-plugin="select_hrm" data-placeholder="Active Status" value={{ active_status|string }}>
                                                    <option value="">Select One</option>
                                                    <option value="">Active</option>
                                                    <option value="">Inactive</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Account Status</label>
                                                <select class="form-control" name="account_status" data-plugin="select_hrm" data-placeholder="Account Status" value={{ account_status|string }}>
                                                    <option value="">Select One</option>
                                                    <option value="">Account Locked</option>
                                                    <option value="">Account UnLocked</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Email Id</label>
                                                <input class="form-control" placeholder="Email Id" name="email_id" type="email" value={{ email_id|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Contact No.</label>
                                                <input class="form-control" placeholder="Contact No." name="contact_no" type="number" value={{ contact_no|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Mobile No.</label>
                                                <input class="form-control" placeholder="Mobile No." name="mobile_no" type="number" value={{ mobile_no|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Salutation</label>
                                                    <input class="form-control" placeholder="Salutation" name="salutation" type="text" value={{ salutation|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Given Name</label>
                                                <input class="form-control" placeholder="Given Name" name="given_name" type="text" value={{ given_name|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Surname</label>
                                                <input class="form-control" placeholder="Surname" name="sur_name" type="text" value={{ sur_name|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>Gender</label>
                                                <select class="form-control" name="gender" data-plugin="select_hrm" data-placeholder="Gender" value={{ gender|string }}>
                                                    <option value="">Select One</option>
                                                    <option value="">Male</option>
                                                    <option value="">Female</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label>Security Question</label>
                                                <input class="form-control" placeholder="Security Question" name="security_question" type="text" value={{ security_question|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label>Security Answer</label>
                                                <input class="form-control" placeholder="Security Answer" name="security_answer" type="text" value={{ security_answer|string }}>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="smart-form">
                                                <!-- <label class="label"></label>-->
                                                <label class="toggle">
                                                    <input type="checkbox" name="password_change_next_login" checked="checked">
                                                    <i data-swchon-text="ON" data-swchoff-text="OFF"></i>Password Change on Next Login</label>
                                                <!-- <select class="form-control" name="password_change_next_login" data-plugin="select_hrm" data-placeholder="Password Change on Next Login">
                                             <option value="">Select One</option>
                                             <option value="">Yes</option>
                                             <option value="">No</option>
                                             </select>-->
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row" style="padding-left:10px;padding-top:10px;padding-bottom:10px;">
                                        <div class="btn-group">
                                            <div class="">
                                                <input name="save" class="btn btn-success" type="submit" value="Submit">
                                                <input type="reset" value="Cancel" class="btn btn-cancel" onclick="return cancel()" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- widget content -->
                            </div>
                            <!-- widget div-->
                        </form>
                    </div>
                    <!--end Widget ID (each widget will need unique ID)-->

                    <!--start Widget ID (each widget will need unique ID)-->
                    <div class="jarviswidget" id="wid-id-1" data-widget-colorbutton="false" data-widget-togglebutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false" data-widget-editbutton="false">
                        <header>
                            <h2><strong>List All {{ title }}</strong> </h2>
                        </header>
                        <!--start widget div-->
                        <div>
                            <!--start widget content -->
                            <div class="widget-body">
                                <div id="datatable_tabletools_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                    <div class="dt-toolbar" style="border:none;">
                                        <div class="col-xs-12 col-sm-6">
                                            <div id="datatable_tabletools_filter" class="dataTables_filter">
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <table id="datatable_tabletools" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="datatable_tabletools_info" style="width: 100%;" width="100%">
                                        <thead>
                                            <tr role="row">
                                                <th data-hide="phone,tablet" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 10px;" aria-label="City: activate to sort column ascending">SI.NO</th>
                                                <th data-class="expand" class="expand sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 60px;" aria-label="Name: activate to sort column ascending">Client Name</th>
                                                <th class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 60px;" aria-label="Phone: activate to sort column ascending">Customer Name</th>
                                                <th data-hide="phone" class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 40px;" aria-label="Company: activate to sort column ascending">Customer Code</th>
                                                <th data-hide="phone,tablet" class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 50px;" aria-label="Zip: activate to sort column ascending">User Role</th>
                                                <th data-hide="phone,tablet" class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 50px;" aria-label="City: activate to sort column ascending">User Name</th>
                                                <th data-hide="phone,tablet" class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 20px;" aria-label="City: activate to sort column ascending">Action Status</th>
                                                <th data-hide="phone,tablet" class="sorting" tabindex="0" aria-controls="datatable_tabletools" rowspan="1" colspan="1" style="width: 20px;" aria-label="City: activate to sort column ascending">Account Status</th>

                                        </thead>
                                        <tbody>
                                            {% for user in user %}
                                                <tr role="row" class="odd">
                                                    <td class="sorting_1">{{ loop.index }}</td>
                                                    <td class=" expand"><span class="responsiveExpander"></span>{{user.client_name.client_name}}</td>
                                                    <td>{{user.customer_name.customer_name}}</td>
                                                    <td>{{user.customer_code}}</td>
                                                    <td>{{user.user_role}}</td>
                                                    <td>{{user.user_name}}</td>
                                                    {% if user.active_status == 'on' %}
                                                        <td>Active</td>
                                                    {% endif %}   
                                                    {% if user.active_status != 'on' %}
                                                        <td>Inactive</td>
                                                    {% endif %}
                                                    {% if user.account_status == 'on' %}
                                                        <td>AccountLock</td>
                                                    {% endif %}   
                                                    {% if user.account_status != 'on' %}
                                                        <td>AccountUnLock</td>
                                                    {% endif %} 
                                                    
                                                    <td class="func1"><a href="{{ url_for('Admin.user_setup_update', user_id = user._id) }}"><button class="btn btn-xs btn-default" data-original-title="Edit Row" type="submit"><i class="fa fa-pencil"></i></button></a>
                                                    <a href="./user_remove?_id={{ user['_id'] }}"><button class="btn btn-xs btn-default" data-original-title="Delete Row" type="submit"><i class="fa fa-trash"></i></button></a></td>

                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                    
                                </div>
                            </div>

                        </div>
                        <!--end widget content -->
                    </div>
                    <!--end widget div-->

                    <!--end Widget ID (each widget will need unique ID)-->

                </article>
                <!-- end NEW WIDGET-->
            </div>
        </section>
        <!-- end widget grid -->
    </div>
    <!-- END MAIN CONTENT -->
</div>


<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js" type="text/javascript"></script>
<script>
$(document).ready(function() {
    $('#datatable_tabletools').DataTable();
} );
</script>

<script>
        
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result)
                    .width(100)
                    .height(80);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

<script>
    function cancel() {
        c=confirm("Do you really want to cancel?");

        // Of course, the following could be shortened to "return c;"
        if (c==true)
        {
            return true;
        }
        else{
            return false;
        }
        
    }
</script>



<script language='javascript' type='text/javascript'>
    function check(input) {
        if (input.value != document.getElementById('password').value) {
            input.setCustomValidity('Password Must be Matching.');
        } else {
            // input is valid -- reset the error message
            input.setCustomValidity('');
        }
    }
</script>
